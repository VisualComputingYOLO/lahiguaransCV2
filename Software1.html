<!DOCTYPE HTML>
<html>
	<head>
		<title>Luis Alejandro Higuaran Serrano | :: Computación Visual ::</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<!-- Code-Prettify -->
		<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

		<!-- P5.js -->
		<script src="p5/p5.min.js"></script>
		<script src="p5/addons/p5.sound.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.min.js"></script> -->

		<!-- Ejemplos P5.js -->
		<script src="p5/js/software/filterGray.js"></script>

		<!-- Bootstrap CSS 
    	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->
	
		<!-- Favicon -->
		<link rel="icon" href="images/favicon.png" sizes="32x32" type="image/png">


	</head>
	<body class="subpage">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<!-- Logo -->
									<h1><a href="index.html" id="logo">VISUAL COMPUTING</a></h1>

								<!-- Nav -->
									<nav id="nav">
										<a href="index.html">INICIO</a>
										<a href="Example1.html">EXAMPLES P5.JS</a>
										<a href="Ilussion1.html">ILLUSION</a>
										<a href="Light1.html">LIGHT</a>
										<a href="Software1.html">SOFTWARE P5.JS</a>
										<a href="Hardware1.html">HARDWARE P5.JS</a>
										<a href="project1.html">PROJECT P5.JS</a>
									</nav>

							</div>
						</div>
					</div>
				</section>

			<!-- Content -->
				<section id="content">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<!-- Main Content -->
									<section>
										<header>
											<h2><a href="https://en.wikipedia.org/wiki/HSL_and_HSV" target="_blank">HSL, HSV, HSB & RGB MODEL</a></h2>
											<h3>PROCESSING & SOFTWARE -  P5.JS</h3>
										</header>
										<p>
											En la siguiente publicación se pondrá en practica lo aprendido durante el estudio de procesamiento
											de imágenes, donde se observó cómo funciona una matriz de pixeles y cómo modificar los pixeles de una
											imagen accediendo a los valores de este arreglo.
										</p>

										<p>
											A continuación, se observará cómo se puede obtener una imagen a escala de grises a
											partir del <em>Promedio</em> de los componentes RGB de una imagen y el caculo del
											coeficiente <em>Luma</em>. Para ello este estudio esta basado en la documentación
											<a href="https://en.wikipedia.org/wiki/HSL_and_HSV#Lightness" target="_blank">HSL and HSV</a>
											y en gran medida estará basado en el ejemplo
											<a href="Pixels4.html" target="_blank">GRAYSCALE FILTERS</a>
											anteriormente trabajado, por lo tanto, no se profundizará en los cálculos de las expresiones,
											sino en la manera de aplicar estas expresiones a nuestro programa en p5.js para modificar
											la luminancia de la imagen y obtener los resultados esperados.
										</p>

										<p>
											Para obtener una imagen a escala de grises por medio del siguiente programa,
											bastará con acceder al componente RGB de cada pixel de la imagen, hacer el
											cálculo del <strong>Promedio RGB</strong> o el coeficiente <strong>Luma</strong>
											utilizando las expresiones descritas en la tabla de Comandos por Teclado y por último
											se reemplazará el valor obtenido en cada uno de los componentes de color RGB del pixel.
											Adicionalmente también se observarán otras posibilidades para modificar la luminancia
											de la imagen y obtener la imagen a escala de grises a partir del calculo del
											<strong>Componente mas grande</strong>, el <strong>Rango medio</strong> y el
											<strong>Valor de Munsell</strong> visto en la documentación.
										</p>

										<h4>Comandos</h4>

										<div class="table-wrapper text-center">
											<table>
												<thead>
													<tr>
														<th>TECLA</th>
														<th>LUMINANCIA</th>
														<th>FORMULA</th>
														<th>RESULTADO</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td><img src="images/keyboard/0.png" style="width:40px;vertical-align: middle"/></td>
														<td>Original</td>
														<td><strong><i><img src="images/HSL, HSV, HSB & RGB MODEL/equation0.png" style="height:20px;;vertical-align: middle"/></i></strong></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img0.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/1.png" style="width:40px;vertical-align: middle"/></td>
														<td>Media aritmética</td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation1.png" style="height:25px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img1.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/2.png" style="width:40px;vertical-align: middle"/></td>
														<td>Componente más grande</td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation2.png" style="height:20px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img2.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/3.png" style="width:40px;vertical-align: middle"/></td>
														<td>Rango medio</td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation3.png" style="height:25px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img3.png" style="width:130px;vertical-align: middle"/></td>
													</tr>											
													<tr>
														<td><img src="images/keyboard/4.png" style="width:40px;vertical-align: middle"/></td>
														<td>Promedio ponderado Luma<h5>(SDTV)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation4.png" style="height:18px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img4.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/5.png" style="width:40px;vertical-align: middle"/></td>
														<td>Promedio ponderado Luma<h5>(Adobe)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation5.png" style="height:18px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img5.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/6.png" style="width:40px;vertical-align: middle"/></td>
														<td>Promedio ponderado Luma<h5>(HDTV)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation6.png" style="height:18px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img6.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/7.png" style="width:40px;vertical-align: middle"/></td>
														<td>Promedio ponderado Luma<h5>(UHDTV, HDR)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation7.png" style="height:18px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img7.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/r.png" style="width:40px;vertical-align: middle"/></td>
														<td>Valor de Munsell [1920]<h5>(Rojo)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation11.png" style="height:20px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img8.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/g.png" style="width:40px;vertical-align: middle"/></td>
														<td>Valor de Munsell [1920]<h5>(Verde)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation12.png" style="height:20px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img9.png" style="width:130px;vertical-align: middle"/></td>
													</tr>
													<tr>
														<td><img src="images/keyboard/b.png" style="width:40px;vertical-align: middle"/></td>
														<td>Valor de Munsell [1920]<h5>(Azul)</h5></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/equation13.png" style="height:20px;;vertical-align: middle"/></td>
														<td><img src="images/HSL, HSV, HSB & RGB MODEL/img10.png" style="width:130px;vertical-align: middle"/></td>
													</tr>										
												</tbody>
											</table>
										</div>

										<div class="canvasp5js" >
											<div>
												<div id="filterGray"></div>												
											</div>
										</div>
										<p></p>
										<h4>p5*js Code</h4>

										<pre>
											<code class="prettyprint">									
let img; // Declarar variable 'img'
let lightness = 0; // Variable de ligereza
let gray=0;

function setup() { 
	var myCanvas = createCanvas(1000, 600);
	myCanvas.parent('filterGray');
	background(210);
	pixelDensity();
	img = loadImage('https://cors-anywhere.herokuapp.com/https://hotelcabreromar.com/wp-content/uploads/2018/04/Cartagena-de-Indias-Cortesi%CC%81a-ProColombia..jpg');
	var title = 'IMAGEN ORIGINAL';
	textSize(18);
	stroke(128,255,255);
	textStyle(BOLDITALIC);
	textAlign(CENTER);
} 

function draw() {
	
	img.resize(width,0)
	loadPixels();	
	img.loadPixels();	
	
	for (let y = 0; y < height; y++) {
		for (let x = 0; x < width; x++){ 
			let index = (x+y*width)*4; // Posicion del pixel
			let r=img.pixels[index+0]; // Componente Red
			let g=img.pixels[index+1]; // Componente Green
			let b=img.pixels[index+2]; // Componente Blue
			let a=img.pixels[index+3]; // Componente Alpha
			
			if (gray===1){
				let I=(r+g+b)/3; // Promedio de los tres componentes
				lightness = I;
				title = 'MEDIA ARITMÉTICA';
			} else if (gray===2){
				let V= max(r,g,b); // Componente mas grande de un color
				lightness = V;
				title = 'COMPONENTE MÁS GRANDE';
			} else if (gray===3){
				let L=(max(r,g,b)+min(r,g,b))/2; // Promedio entre el componente mas grande y el mas pequeño
				lightness = L;
				title = 'RANGO MEDIO';
			} else if (gray===4){ // Promedio ponderado de RGB con corrección gamma (Luma)
				let Y601= 0.2989*r + 0.5870*g + 0.1140*b; // SDTV
				lightness = Y601;
				title = 'LUMA (SDTV)';
			} else if (gray===5){ 
				let Y240= 0.212*r + 0.701*g + 0.087*b; // Adobe
				lightness = Y240;
				title = 'LUMA (ADOBE)';
			} else if (gray===6){ 
				let Y709= 0.2126*r + 0.7152*g + 0.0722*b; // HDTV
				lightness = Y709;
				title = 'LUMA (HDTV)';
			} else if (gray===7){ 
				let Y2020= 0.2627*r + 0.6780*g + 0.0593*b; // UHDTV,HDR
				lightness = Y2020;
				title = 'LUMA (UHDTV, HDR)';
			} else if (gray===11){ 
				let V= 10*sqrt(r); // Munsell Rojo
				lightness = V;
				title = 'MUNSELL (ROJO)'
			} else if (gray===12){ 
				let V= 10*sqrt(g); // Munsell Verde
				lightness = V;
				title = 'MUNSELL (VERDE)'
			} else if (gray===13){ 
				let V= 10*sqrt(b); // Munsell Azul
				lightness = V;
				title = 'MUNSELL (AZUL)'
			}
									
			pixels[index+0] = lightness;
			pixels[index+1] = lightness;
			pixels[index+2] = lightness;
			pixels[index+3] = a;
			
			if (gray===0){ // Imagen original
				pixels[index+0] = r;
				pixels[index+1] = g;
				pixels[index+2] = b;
				pixels[index+3] = a;
				title = 'IMAGEN ORIGINAL';
			}
		}
	}
	updatePixels();
	image(img, 12, 12, img.width * (250 / img.width), img.height * (250 / img.width));
	text(title, width/2, 20);
}

// Se ejecuta cuando se presiona cualquier tecla
function keyPressed() {
	if (key === '0') {
	gray = 0;
	} else if (key === '1') { 
	gray = 1;
	} else if (key === '2') {
	gray = 2;
	} else if (key === '3') {
	gray = 3;
	} else if (key === '4') {
	gray = 4;
	} else if (key === '5') {
	gray = 5;
	} else if (key === '6') {
	gray = 6;
	} else if (key === '7') {
	gray = 7;
	} else if (key === 'r') {
	gray = 11;
	} else if (key === 'g') {
	gray = 12;
	} else if (key === 'b') {
	gray = 13;
	}  
}
											</code>
										</pre>
										<!-- Pagination -->
										<div class="pagination">
											<a href="" class="button-large disable">Previous Page</a>
											<a href="Software2.html" target="_parent" class="button-large">Next Page</a>
										</div>
									</section>
							</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
				<section id="footer">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">

								<!-- Links -->
									
									<section>
										<!--
										<h2>Links to Important Stuff</h2>
										<div>
											<div class="row">
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
											</div>
										</div>
										-->
									</section>

							</div>
							<div class="col-4 col-12-medium imp-medium">

								<!-- Blurb -->
									<section>
										<!--
										<h2>An Informative Text Blurb</h2>
										<p>
											Duis neque nisi, dapibus sed mattis quis, rutrum accumsan sed. Suspendisse eu
											varius nibh. Suspendisse vitae magna eget odio amet mollis. Duis neque nisi,
											dapibus sed mattis quis, sed rutrum accumsan sed. Suspendisse eu varius nibh
											lorem ipsum amet dolor sit amet lorem ipsum consequat gravida justo mollis.
										</p>
										-->
									</section>

							</div>
						</div>
					</div>
				</section>

			<!-- Copyright -->
				<div id="copyright">
					&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>