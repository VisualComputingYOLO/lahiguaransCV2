<!DOCTYPE HTML>
<html>
	<head>
		<title>Luis Alejandro Higuaran Serrano | :: Computaci칩n Visual ::</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />

		<!-- Code-Prettify -->
		<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>

		<!-- P5.js -->
		<script src="p5/p5.min.js"></script>
		<script src="p5/addons/p5.sound.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/addons/p5.sound.min.js"></script> -->

		<!-- Ejemplos P5.js -->
		<script src="p5/js/illusions/kanizsa.js"></script>

		<!-- Bootstrap CSS 
    	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">-->
	
		<!-- Favicon -->
		<link rel="icon" href="images/favicon.png" sizes="32x32" type="image/png">


	</head>
	<body class="subpage">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<!-- Logo -->
									<h1><a href="index.html" id="logo">VISUAL COMPUTING</a></h1>

								<!-- Nav -->
									<nav id="nav">
										<a href="index.html">INICIO</a>
										<a href="Example1.html">EXAMPLES P5</a>
										<a href="Ilussion1.html">ILLUSION P5</a>
										<a href="Light1.html">LIGHT THREE</a>
										<a href="Software1.html">SOFTWARE P5</a>
										<a href="Hardware1.html">HARDWARE GLSL</a>
										<a href="project1.html">PROJECT GLSL/TL</a>
									</nav>

							</div>
						</div>
					</div>
				</section>

			<!-- Content -->
				<section id="content">
					<div class="container">
						<div class="row">
							<div class="col-12">

								<!-- Main Content -->
									<section>
										<header>
											<h2><a href="https://www.patreon.com/posts/color-grid-28734535" target="_blank">FACE ILLUSION</a></h2>
											<h3>PROJECT -  P5.JS</h3>
										</header>
										<p>
											En la siguiente publicaci칩n se vera el desarrollo de nuestro proyecto 
											<strong>Reconocimiento facial con ilusiones opticas</strong>
										</p>

										<div class="canvasp5js" >
											<div>
												<p style="text-align: center;">
													<iframe src="p5/js/shaders/project/index.html" style="height:500px;width:900px;text-align: center;"></iframe>
												</p>
											</div>
										</div>
										<p></p>
										<h4>texture.frag Code</h4>

										<pre>
											<code class="prettyprint">									
// Estas son definiciones necesarias que le permiten a la tarjeta gr치fica saber c칩mo representar el sombreador
#ifdef GL_ES
precision mediump float;
#endif
	
varying vec2 vTexCoord;
	// Valores que se pasan desde p5
uniform sampler2D u_img;
uniform int u_key;
vec3 lineColor = vec3(0.8941, 0.3137, 0.0);
float maxMix = (0.6);
float minMix = (0.2);
float lineWidth = 0.008;
float lineWidthHalf = lineWidth/2.0;
uniform float izq;
uniform float derecha;
uniform float arriba;
uniform float abajo;

float grid(vec2 st, float res)
{
	vec2 grid = fract(st*res);
	return (step(res,grid.x) * step(res,grid.y));
}
// Funcion para convertir un color a escala de grises
vec3 orangeColor(vec3 color, float x) {
	vec3 newColor;
	if(x == 1.0){
	newColor = color;
	} else {
	if(color.r <= 0.3){
		newColor.r = mix(color.r, lineColor.r, minMix);
	} else {
		newColor.r = mix(color.r, lineColor.r, maxMix);
	}
	if(color.g <= 0.3){
		newColor.g = mix(color.g, lineColor.g, minMix);
	} else {
		newColor.g = mix(color.g, lineColor.g, maxMix);
	}
	if(color.b <= 0.3){
		newColor.b = mix(color.b, lineColor.b, minMix);
	} else {
		newColor.b = mix(color.b, lineColor.b, maxMix);
	}
	}  
	return newColor;
}

void main() {
	vec2 uv = vTexCoord;
	vec3 color;
	float i;
	uv.y = 1.0 - uv.y;
	//Invierte la posicion de la cordenada  para que la imagen no quede alrreves
	vec4 tex = texture2D(u_img, uv);

	vec2 grid_uv = uv.xy * 100.0; // scale
	float x = grid(grid_uv, 0.3);
	color = orangeColor(tex.rgb, x);  

	if((uv.x <= izq || uv.x >= derecha) || (uv.y <= arriba || uv.y >= abajo)){
	color = tex.rgb;
	}

	gl_FragColor = vec4(color, 1.0);

}
											</code>
										</pre>

										<h4>p5.js Code</h4>

										<pre>
											<code class="prettyprint">									
let theShader;
let shaderTexture;
let img;
let slider;
let gray = 0;
let izq = 134.0;
let derecha = 323.0;
let arriba = 55.0;
let abajo = 273.0;

function preload(){
	img = loadImage('https://cors-anywhere.herokuapp.com/https://i.pinimg.com/originals/97/8c/89/978c89a6ad573b6c7eb38e75b98ec6c2.png');
	theShader = loadShader('texture.vert','texture.frag');
}

function setup() {
	createCanvas(img.width, img.height, WEBGL);
	background(210);
	pixelDensity(1);
	noStroke();
	img.resize(width,0);

	shaderTexture = createGraphics(img.width, img.height, WEBGL);
	shaderTexture.noStroke(); 
}

function draw(){
	push();
	Project();
	pop();
}

function Project() {

	// Se pasa el shader a la capa del createGraphics
	shaderTexture.shader(theShader);

	// Valores uniform para el fragment shader
	theShader.setUniform("u_img", img);
	theShader.setUniform("izq", izq / img.width);
	theShader.setUniform("derecha", derecha / img.width);
	theShader.setUniform("arriba", arriba / img.height);
	theShader.setUniform("abajo", abajo / img.height);
	/* theShader.setUniform("u_key", gray); */
	
	// Renderizar el shader
	shaderTexture.rect(0,0,img.width,img.height);

	//Se pasa el shader como textura
	push();
	//Se pasa el shader del video como textura
	texture(shaderTexture);
	plane(img.width,img.height);
	pop();  


}

/* function keyPressed() {
	if (key === '0') {
	gray = 0;
	} else if (key === '1') { 
	gray = 1;
	} else if (key === '2') {
	gray = 2;
	} else if (key === '3') {
	gray = 3;
	} else if (key === '4') {
	gray = 4;
	}
} */

function windowResized(){
	resizeCanvas(windowWidth, windowHeight);
}

												
											</code>
										</pre>

										<!-- Pagination -->
										<div class="pagination">
											<a href="" class="button-large disable">Previous Page</a>
											<a href="project2.html" target="_parent" class="button-large">Next Page</a>
										</div>
									</section>
							</div>
						</div>
					</div>
				</section>

			<!-- Footer -->
				<section id="footer">
					<div class="container">
						<div class="row">
							<div class="col-8 col-12-medium">

								<!-- Links -->
									
									<section>
										<!--
										<h2>Links to Important Stuff</h2>
										<div>
											<div class="row">
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
												<div class="col-3 col-12-small">
													<ul class="link-list last-child">
														<li><a href="#">Neque amet dapibus</a></li>
														<li><a href="#">Sed mattis quis rutrum</a></li>
														<li><a href="#">Accumsan suspendisse</a></li>
														<li><a href="#">Eu varius vitae magna</a></li>
													</ul>
												</div>
											</div>
										</div>
										-->
									</section>

							</div>
							<div class="col-4 col-12-medium imp-medium">

								<!-- Blurb -->
									<section>
										<!--
										<h2>An Informative Text Blurb</h2>
										<p>
											Duis neque nisi, dapibus sed mattis quis, rutrum accumsan sed. Suspendisse eu
											varius nibh. Suspendisse vitae magna eget odio amet mollis. Duis neque nisi,
											dapibus sed mattis quis, sed rutrum accumsan sed. Suspendisse eu varius nibh
											lorem ipsum amet dolor sit amet lorem ipsum consequat gravida justo mollis.
										</p>
										-->
									</section>

							</div>
						</div>
					</div>
				</section>

			<!-- Copyright -->
				<div id="copyright">
					&copy; Untitled. All rights reserved. | Design: <a href="http://html5up.net">HTML5 UP</a>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>